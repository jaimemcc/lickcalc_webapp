<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LickCalc GUI - Help Documentation</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/help_styles.css">
</head>
<body>
    <!-- Header -->
    <div class="help-header">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h1>📖 LickCalc GUI Help</h1>
            <p>Comprehensive guide for analyzing licking microstructure in rodent behavior experiments</p>
        </div>
    </div>

    <!-- Main Layout with Sidebar and Content -->
    <div class="help-layout">
        <!-- Sticky Sidebar with Table of Contents -->
        <aside class="sidebar">
            <div class="sidebar-content">
                <h3>Table of Contents</h3>
                <ul>
                    <li><a href="#overview">📖 Overview</a></li>
                    <li><a href="#getting-started">🚀 Getting Started</a></li>
                    <li><a href="#file-formats">📁 File Formats</a></li>
                    <li><a href="#session-analysis">📊 Session Analysis</a></li>
                    <li><a href="#time-window">⏱️ Time Window</a></li>
                    <li><a href="#microstructural">🔬 Microstructure</a></li>
                    <li><a href="#parameters">⚙️ Parameters</a></li>
                    <li><a href="#data-export">💾 Data Export</a></li>
                    <li><a href="#results-table">📋 Results Table</a></li>
                    <li><a href="#troubleshooting">🔧 Troubleshooting</a></li>
                    <li><a href="#glossary">📚 Glossary</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            {% include 'help_chapters/overview.html' %}
            {% include 'help_chapters/getting-started.html' %}
            {% include 'help_chapters/file-formats.html' %}
            {% include 'help_chapters/session-analysis.html' %}
            {% include 'help_chapters/time-window.html' %}
            {% include 'help_chapters/microstructural.html' %}
            {% include 'help_chapters/parameters.html' %}
            {% include 'help_chapters/data-export.html' %}
            {% include 'help_chapters/results-table.html' %}
            {% include 'help_chapters/troubleshooting.html' %}
            {% include 'help_chapters/glossary.html' %}
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 LickCalc GUI - Behavioral Microstructure Analysis Tool</p>
        <p>For technical support or questions about the analysis methods, consult your research supervisor or the documentation.</p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Smooth scrolling and active link highlighting -->
    <script>
        // Smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Highlight active section in sidebar based on scroll position
        const sections = document.querySelectorAll('section[id]');
        const sidebarLinks = document.querySelectorAll('.sidebar a[href^="#"]');
        
        function highlightActiveSection() {
            let current = '';
            const scrollPosition = window.pageYOffset + 200; // Offset for header
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollPosition >= sectionTop - 50) {
                    current = section.getAttribute('id');
                }
            });
            
            sidebarLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }
        
        // Update on scroll and load
        window.addEventListener('scroll', highlightActiveSection);
        window.addEventListener('load', highlightActiveSection);
    </script>
</body>
</html>
